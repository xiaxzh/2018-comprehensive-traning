# Activity+软件项目开发规范

## 工作流

### 概述

采用gitlab工作流，master为主分支，所有的开发工作均在master分支进行，完成开发后，于每次迭代最后两天，将代码进行集成测试，完成后，从master分支拉取代码，合并至production分支

### 权限

各方向组长有各自仓库的全部权限，组员只有对master分支进行修改的权限，对其他项目和分支，拥有查看的权限

### git仓库使用要求

**必须遵循commit-pull-push的过程**否则由此带来的任何代码遗失等问题，由本人承担

## 代码规范

### 前端要求

使用eslint对代码进行规范，每次提交前，必须先保证静态测试通过，除此之外，代码中需包含必要的注释，包括但不限于以下内容：

- 每个实际函数前的输入、输出及函数功能阐述
- 类(如果存在)的具体说明及成员变量说明

### 后台要求

使用gofmt或vscode插件对代码进行格式化，不再要求单独的静态测试，注释的要求请参阅上述前端要求

## 任务发布

所有的要求均在github的team模块下进行发布，每次迭代的任务均在Kanban上进行发布，请注意，每次发布的任务的完成时间，都应在每个开发迭代周期结束的两天前完成，组长检查后，标记完成。

## 错误信息返回规范

1. 所有非2xx的状态码，都需在返回的body中加入msg信息，用以向前端解释出现的问题

1. 所有的msg均应该从用户角度出发，所有村务信息都必须是用户可以理解的错误，返回信息中，除5xx之外的其他状态码，均不得出现任何涉及软件开发属于的信息

1. 前端需要将后台返回的错误指令显示给用户

1. 所有出现的错误信息，均需在本项目的`error_message.md`中注明，并加以解释

## 后台日志信息规范

```
[时间] [api] [类型]
日志信息
```

1. 时间为日志产生的时间，精确到秒

2. api为请求的接口，应包含完整路径，例如`/api/{username}`，当前请求中的`username`为`lalala`，则日志记录应为`/api/lalala`，但是get请求的参数不需要放在其中

3. 日志信息应包含以下内容

    - 对于info类型的信息，应包含处理的业务，例如，`a用户创建了b活动`，该类日志主要用于记录业务相关的信息

    - 对于error类型的信息，应包含错误的详细信息，包括涉及到的变量以及error的值，例如，当用户传回一个非法的电话号码导致解析失败时，应在日志中包含该号码变量以及atoi函数的返回值

    - 对于debug类型的信息，由开发者自行定义，但debug类型的信息，不允许在生产环境中出现，可以使用环境变量进行控制